---
title: "05. 파티션"
date: 2023-04-09T13:50:55.575Z
categories: [Series, File system]
tags: ["forensic"]
---
## **파티션**

---

일반적으로 사람들은 컴퓨터를 구입 후 하드디스크 용량을 최소한 두 개의 파티션으로 분할 후 사용할 것이다. 그렇다면 왜 파티션을 분할해서 사용하는 것일까? 다양한 이유가 있겠지만 몇 가지 이유만 살펴보자.

<br>

* 분할된 파티션을 중요 데이터 저장용도나 백업 용도로 사용할 수 있다.
* 하나의 컴퓨터에서 다양한 운영체제를 설치하여 멀티 부팅이 가능하다.
* 저장매체 공간이 클 수록 파일 탐색이나 공간 낭비가 심할 수 있다. 따라서 비교적 적은 공간으로 분할하는 것이 성능을 향상시켜준다.
* 하드디스크 입장에서 파티션을 나누게 되면 헤드의 움직임이 적어지므로 탐색 시간이 빠르게 된다.

<br>

### 파티션 타입

---

저장매체는 일반적으로 MBR이라는 구조를 통해 파티션을 관리한다. MBR은 MS-DOS 뿐만 아니라 Windows, Linux 등에서 공통적으로 사용하는 구조이다. 저장매체의 용량이 커지면서 MBR도 GPT로 대체되고 있지만 아직 MBR이 많이 사용되고 있다. 자세한 내용은 다음에 살펴볼 것이다.

MBR은 저장매체를 4개의 파티션으로 분할 할 수 있다. 이 중 부팅이 가능한 주 파티션(Primary Partition)은 항상 하나 이상을 가져야 한다. 그렇지 않다면 MBR의 부트 코드를 실행하는 과정에서 부팅 가능한 파티션이 없다는 오류가 발생할 것이다.

주 파티션은 4개까지만 생성할 수 있지만 논리 파티션은 4개 이상이 가능하다. 이것은 확장 파티션(Extended Partition)이라는 구조를 통해 가능하다. 확장 파티션은 16 bytes의 파티션 테이블에서 파티션 타입 값을 0x05h, 0x0Fh로 가진다. 확장 파티션을 통해서 생성할 수 있는 논리 파티션도 제한이 있는데 A,B는 예약이 되어 있기 때문에 최대 24개(C-Z)의 파티션이 생성 가능하다.

확장 파티션은 데이터를 저장하기 위한 용도가 아니라 논리 파티션을 생성하기 위한 용도로 사용된다. 결국 데이터는 논리 파티션에 저장된다.
다음은 주 파티션과 확장, 논리 파티션의 관계를 나타낸 그림이다.

![](/images/88f673e1-9c87-4b0d-be9a-8d25d6aba6cf-image.png)

<br>

### 파티션 복구

---

복구 도구들은 대부분 삭제된 파일 복구, 파일 카빙(file carving)과 함께 파티션 복구 기능을 지원한다. 파티션 복구는 사용자가 실수로 파티션을 삭제했을 때 복구하는 기법이다.

파티션을 삭제하게 되면 파티션 테이블에서 해당 파티션에 대한 정보도 삭제가 된다. 이 경우 파티션 테이블의 정보는 사라졌지만, 해당 파티션이 위치하고 있던 영역의 데이터는 그대로 남아 있기 때문에 지워진 파티션의 부트 섹터(Boot Sector)의 정보를 토대로 파티션 테이블을 다시 재구성 할 수 있다.